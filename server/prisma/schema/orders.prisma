enum ORDER_STATUS {
    PENDING
    CONFIRMED
    SHIPPED
    DELIVERED
    CANCELLED
}

enum PAYMENT_METHOD {
  COD
  CREDIT_CARD
  ELECTRO_WALLET
  MOMO
}

model Orders {
    order_id String @id @default(cuid()) @db.VarChar(25)
    customer_id String?
    order_status ORDER_STATUS @default(PENDING)
    total_price Float
    voucher_code String?
    created_at DateTime @default(now())

    payment_method PAYMENT_METHOD?

    customer Customers? @relation(fields: [customer_id], references: [customer_id], onDelete: SetNull)
    order_items Order_Items[]
    voucher Vouchers? @relation(fields: [voucher_code], references: [voucher_code], onDelete: SetNull)
    invoices Invoices[]
    shipping_address Shipping_Address?
}

model Order_Items {
    order_id String @db.VarChar(25)
    product_id String @db.VarChar(50)
    quantity Int
    unit_price Float
    total_price Float
    @@id([order_id, product_id])

    order Orders @relation(fields: [order_id], references: [order_id], onDelete: Cascade)
    product Products @relation(fields: [product_id], references: [product_id], onDelete: Cascade)
}

model Invoices {
    invoice_id String @id @default(cuid()) @db.VarChar(50)
    order_id String? @db.VarChar(10)
    total_price Float
    created_at DateTime @default(now())

    order Orders? @relation(fields: [order_id], references: [order_id], onDelete: SetNull)
}

model Shipping_Address {
    shipping_id String @id @db.VarChar(50) @default(cuid())
    order_id String @db.VarChar(25) @unique
    shipping_status ORDER_STATUS @default(PENDING)
    created_at DateTime @default(now())
    delivery_date DateTime?

    city          String   @db.VarChar(50)
    district      String?  @db.VarChar(50)
    ward          String?   @db.VarChar(50)
    address       String   @db.Text

    full_name      String?   @db.VarChar(100)
    phone_number   String?   @db.Char(10)

    order Orders @relation(fields: [order_id], references: [order_id], onDelete: Cascade)
}